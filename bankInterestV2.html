<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bank Interest Countdown</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="js/script.js"></script>
    <link rel="stylesheet" href="css/bank-interest-v2.css">
    <link rel="stylesheet" href="css/essential.css">
</head>
<body>
    <div id="loader">
        <div></div>
        <div></div>
        <div></div>
      </div>
      <!-- Top Navbar -->
      <div class="navbar">
        <span class="menu-icon material-icons" onclick="toggleSidebar()">menu</span>
        <a href="index.html"><img src="cmc-guides.png" style="height: 40px;"></a>
      </div>
    
      <!-- Sidebar -->
      <div class="sidebar" id="sidebar">
        <span class="sidebar-close material-icons" onclick="toggleSidebar()">close</span>
        <img src="cmc-guides.png" alt="CMC Guides Logo">
        <hr>
        <a href="https://craftersmc-guides-project.github.io/rank-sellers.html">Rank Sellers</a>
        <a href="https://craftersmc-guides-project.github.io/unicode.html">Unicode</a>
        <a href="https://craftersmc.wiki.gg/wiki/">CraftersMC Wiki</a>
        <a href="https://craftersmc.net/">CraftersMC Website</a>
      </div>

<div class="container">
    <h1>Bank Interest Countdown</h1>
    <p>Bank interest can be claimed every 31 hours from the last interest, next one starting in...</p>

    <div class="progress">
        <div id="progressBar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
    </div>

    <p id="timer" class="timer"></p>

    <div class="row">
        <div class="col-6">
            <h4>Last Interest Claim</h4>
            <p id="lastInterestTime"></p>
        </div>
        <div class="col-6">
            <h4>Next Interest Claim</h4>
            <p id="nextInterestTime"></p>
        </div>
    </div>

    <div class="divider"></div>

    <div class="interest-container">
        <button class="collapsible" onclick="toggleInterestContainer()">Next Interests (Click to Expand)</button>
        <div class="content">
            <div class="interest-list-container" id="interestContainer"></div>
        </div>
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

<script>
const initialTargetTime = new Date('2025-01-26T07:30:00+05:30').getTime();
let targetTime = initialTargetTime;

function formatTime(date) {
    const options = { 
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric',
        hour: '2-digit', 
        minute: '2-digit', 
        hour12: true 
    };
    return date.toLocaleString('en-IN', options).replace(':00', '').trim();
}

function calculateInterestTimes() {
    const interestTimes = [];
    for (let i = 0; i < 50; i++) {
        const nextInterestDate = new Date(initialTargetTime + (i * 31 * 60 * 60 * 1000));
        interestTimes.push(formatTime(nextInterestDate));
    }
    return interestTimes;
}

function displayNextInterest() {
    const interestTimes = calculateInterestTimes();
    const nextInterest = interestTimes[1];
    document.getElementById("nextInterestTime").textContent = nextInterest;
}

function displayLastInterest() {
    const interestTimes = calculateInterestTimes();
    const lastInterest = interestTimes[0];
    document.getElementById("lastInterestTime").textContent = lastInterest;
}

function displayInterests() {
    const interestContainer = document.getElementById("interestContainer");
    const interests = calculateInterestTimes();
    interestContainer.innerHTML = "";
    for (let i = 1; i < 11; i++) {
        const div = document.createElement("div");
        div.classList.add("interest-item");
        div.textContent = interests[i];
        interestContainer.appendChild(div);
    }
}

function toggleInterestContainer() {
    const content = document.querySelector(".content");
    content.classList.toggle("show");

    const collapsible = document.querySelector(".collapsible");
    if (content.classList.contains("show")) {
        collapsible.innerHTML = "Next Interests (Click to Collapse)";
        content.style.display = "block";
    } else {
        collapsible.innerHTML = "Next Interests (Click to Expand)";
        content.style.display = "none";
    }
}

function updateNextInterestTime() {
    const interestTimes = calculateInterestTimes();
    const lastInterest = interestTimes[0];
    const nextInterest = interestTimes[1];

    document.getElementById("lastInterestTime").textContent = lastInterest;
    document.getElementById("nextInterestTime").textContent = nextInterest;

    displayInterests();
}

function updateProgressBarAndTimer() {
    const now = new Date().getTime();
    const elapsedTime = now - targetTime;

    if (elapsedTime >= 31 * 60 * 60 * 1000) {
        targetTime += 31 * 60 * 60 * 1000;
        updateNextInterestTime();
    }

    const remainingTime = 31 * 60 * 60 * 1000 - elapsedTime;
    const hours = Math.floor((remainingTime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((remainingTime % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((remainingTime % (1000 * 60)) / 1000);

    document.getElementById("timer").innerHTML = `${hours}h ${minutes}m ${seconds}s`;

    const percentage = (elapsedTime / (31 * 60 * 60 * 1000)) * 100;
    document.getElementById("progressBar").style.width = percentage + "%";
}

const timerInterval = setInterval(function() {
    const now = new Date().getTime();
    const remainingTime = targetTime - now;

    if (remainingTime <= 0) {
        targetTime += 31 * 60 * 60 * 1000;
        updateNextInterestTime();
    } else {
        const days = Math.floor(remainingTime / (1000 * 60 * 60 * 24));
        const hours = Math.floor((remainingTime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((remainingTime % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((remainingTime % (1000 * 60)) / 1000);

        document.getElementById("timer").innerHTML = `${days}d ${hours}h ${minutes}m ${seconds}s`;

        const totalTime = 31 * 60 * 60 * 1000;
        const percentage = (remainingTime / totalTime) * 100;
        document.getElementById("progressBar").style.width = percentage + "%";
    }
}, 1000);

displayNextInterest();
displayLastInterest();
displayInterests();
</script>

</body>
</html>
